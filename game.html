<!DOCTYPE html>
<html lang="en">
    
<head>
  <meta charset="UTF-8" />
  <title>Dino Runner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body {
      margin: 0;
      background: linear-gradient(#87ceeb, #e0f7fa);
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .page-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .game-container {
      position: relative;
      background: white;
      padding: 16px;
      border-radius: 16px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.25);
    }

    canvas {
      border-radius: 12px;
      background: #c8f7c5;
      display: block;
    }

    .ui {
      display: flex;
      justify-content: space-between;
      margin-bottom: 6px;
      font-weight: bold;
    }

    .overlay {
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.7);
      color: white;
      display: none;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      border-radius: 16px;
    }

    .overlay h1 {
      color: #ef4444;
      font-size: 40px;
    }

    .overlay button {
      margin-top: 16px;
      padding: 12px 24px;
      font-size: 18px;
      border: none;
      border-radius: 8px;
      background: #22c55e;
      cursor: pointer;
      font-weight: bold;
    }

    .footer {
      text-align: center;
      margin-top: 20px;
    }
  </style>
</head>

<body>

<div class="page-wrapper">

  <div class="game-container">
    <div class="ui">
      <div id="score">Score: 0</div>
      <div id="high">High Score: 0</div>
    </div>

    <canvas id="game" width="900" height="300"></canvas>

    <div id="failOverlay" class="overlay">
      <h1>LEVEL FAILED</h1>
      <button onclick="location.reload()">Play Again</button>
    </div>
  </div>

  <!-- Link below the game -->
  <div class="footer">
    <a href="stock market investing page.html">Click this to learn more about the Stock Market</a>
  </div>

</div> <!-- end page-wrapper -->

<script>
  const canvas = document.getElementById("game");
  const ctx = canvas.getContext("2d");
  const failOverlay = document.getElementById("failOverlay");

  const scoreEl = document.getElementById("score");
  const highEl = document.getElementById("high");

  let score = 0;
  let highScore = localStorage.getItem("dinoHigh") || 0;
  highEl.textContent = "High Score: " + highScore;

  const groundY = 220;
  const gravity = 0.8;
  let speed = 6;

  let frame = 0;
  let gameOver = false;

  const dino = {
    x: 80,
    y: groundY,
    w: 55,
    h: 45,
    vy: 0,
    jumping: false
  };

  let obstacles = [];

  function drawBackground() {
    ctx.fillStyle = "#87ceeb";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    ctx.fillStyle = "rgba(255,255,255,0.9)";
    for (let i = 0; i < 4; i++) {
      const x = (frame * 0.3 + i * 260) % canvas.width;
      ctx.beginPath();
      ctx.arc(x, 60, 20, 0, Math.PI * 2);
      ctx.arc(x + 25, 60, 25, 0, Math.PI * 2);
      ctx.arc(x + 50, 60, 20, 0, Math.PI * 2);
      ctx.fill();
    }

    ctx.fillStyle = "#4b8b3b";
    ctx.fillRect(0, groundY + dino.h, canvas.width, canvas.height);
  }

  function drawDino() {
    ctx.fillStyle = "#2e7d32";

    ctx.beginPath();
    ctx.ellipse(dino.x + 25, dino.y + 25, 25, 20, 0, 0, Math.PI * 2);
    ctx.fill();

    ctx.beginPath();
    ctx.ellipse(dino.x + 50, dino.y + 18, 16, 14, 0, 0, Math.PI * 2);
    ctx.fill();

    ctx.strokeStyle = "#1b5e20";
    ctx.lineWidth = 6;
    ctx.beginPath();
    ctx.moveTo(dino.x + 5, dino.y + 28);
    ctx.lineTo(dino.x - 15, dino.y + 20);
    ctx.stroke();

    ctx.lineWidth = 5;
    ctx.beginPath();
    ctx.moveTo(dino.x + 20, dino.y + 45);
    ctx.lineTo(dino.x + 20, dino.y + 60);
    ctx.moveTo(dino.x + 35, dino.y + 45);
    ctx.lineTo(dino.x + 35, dino.y + 60);
    ctx.stroke();

    ctx.fillStyle = "#fff";
    ctx.beginPath();
    ctx.arc(dino.x + 55, dino.y + 16, 4, 0, Math.PI * 2);
    ctx.fill();
    ctx.fillStyle = "#000";
    ctx.beginPath();
    ctx.arc(dino.x + 56, dino.y + 17, 2, 0, Math.PI * 2);
    ctx.fill();
  }

  function spawnObstacle() {
    const r = Math.random();
    if (r < 0.5) {
      obstacles.push({ type: "tree", x: canvas.width, y: groundY, w: 30, h: 40 });
    } else if (r < 0.75) {
      obstacles.push({ type: "bird", x: canvas.width, y: groundY - 40, w: 48, h: 26, wing: 0 });
    } else {
      obstacles.push({ type: "asteroid", x: canvas.width, y: groundY + 20, w: 34, h: 34, rot: Math.random() * Math.PI });
    }
  }

  function drawObstacles() {
    obstacles.forEach(o => {
      if (o.type === "tree") {
        ctx.fillStyle = "#5b3a1e";
        ctx.fillRect(o.x + 10, o.y + 20, 10, o.h);
        ctx.fillStyle = "#166534";
        ctx.beginPath();
        ctx.arc(o.x + 15, o.y + 20, 25, 0, Math.PI * 2);
        ctx.fill();
      }
      if (o.type === "bird") {
        const wing = Math.sin(o.wing) * 10;
        ctx.fillStyle = "#374151";
        ctx.beginPath();
        ctx.ellipse(o.x + 24, o.y + 13, 18, 10, 0, 0, Math.PI * 2);
        ctx.fill();
        ctx.strokeStyle = "#1f2937";
        ctx.lineWidth = 3;
        ctx.beginPath();
        ctx.moveTo(o.x + 10, o.y + 13);
        ctx.lineTo(o.x - 8, o.y + 13 - wing);
        ctx.moveTo(o.x + 38, o.y + 13);
        ctx.lineTo(o.x + 56, o.y + 13 - wing);
        ctx.stroke();
      }
      if (o.type === "asteroid") {
        ctx.save();
        ctx.translate(o.x + o.w / 2, o.y + o.h / 2);
        ctx.rotate(o.rot);
        const g = ctx.createRadialGradient(-6, -6, 4, 0, 0, 20);
        g.addColorStop(0, "#d1d5db");
        g.addColorStop(1, "#6b7280");
        ctx.fillStyle = g;
        ctx.beginPath();
        ctx.arc(0, 0, o.w / 2, 0, Math.PI * 2);
        ctx.fill();
        ctx.restore();
      }
    });
  }

  function update() {
    if (gameOver) return;
    frame++;
    score++;
    scoreEl.textContent = "Score: " + score;

    if (frame % 80 === 0) spawnObstacle();

    drawBackground();

    dino.y += dino.vy;
    dino.vy += gravity;
    if (dino.y >= groundY) {
      dino.y = groundY;
      dino.vy = 0;
      dino.jumping = false;
    }

    obstacles.forEach(o => {
      o.x -= speed;
      if (o.wing !== undefined) o.wing += 0.25;
      if (o.rot !== undefined) o.rot += 0.15;

      if (
        dino.x < o.x + o.w &&
        dino.x + dino.w > o.x &&
        dino.y < o.y + o.h &&
        dino.y + dino.h > o.y
      ) {
        gameOver = true;
        failOverlay.style.display = "flex";
        if (score > highScore) {
          localStorage.setItem("dinoHigh", score);
        }
      }
    });

    obstacles = obstacles.filter(o => o.x + o.w > 0);

    drawDino();
    drawObstacles();

    requestAnimationFrame(update);
  }

  document.addEventListener("keydown", e => {
    if (e.code === "Space" && !dino.jumping) {
      dino.vy = -14;
      dino.jumping = true;
    }
  });

  update();
</script>

</body>
</html>
